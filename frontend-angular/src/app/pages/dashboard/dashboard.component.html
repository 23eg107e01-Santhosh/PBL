<div class="dashboard-container">
  <h1 class="page-title">Dashboard</h1>
  
  <div *ngIf="loading" class="loading-container">
    <mat-spinner></mat-spinner>
  </div>

  <div *ngIf="!loading" class="dashboard-content">
    <!-- Welcome Card -->
    <mat-card class="welcome-card">
      <mat-card-content>
        <h2>Welcome back, {{getUserDisplayName()}}!</h2>
        <p>Here's what's happening today</p>
      </mat-card-content>
    </mat-card>

    <!-- Stats Cards -->
    <div class="stats-grid">
      <mat-card class="stat-card">
        <mat-card-content>
          <div class="stat-icon assignments">
            <mat-icon>assignment</mat-icon>
          </div>
          <h3>{{dashboardData.stats.totalAssignments}}</h3>
          <p>Assignments</p>
        </mat-card-content>
      </mat-card>

      <mat-card class="stat-card">
        <mat-card-content>
          <div class="stat-icon announcements">
            <mat-icon>announcement</mat-icon>
          </div>
          <h3>{{dashboardData.stats.totalAnnouncements}}</h3>
          <p>Announcements</p>
        </mat-card-content>
      </mat-card>

      <mat-card class="stat-card" *ngIf="authService.isAdmin()">
        <mat-card-content>
          <div class="stat-icon students">
            <mat-icon>people</mat-icon>
          </div>
          <h3>{{dashboardData.stats.totalStudents}}</h3>
          <p>Students</p>
        </mat-card-content>
      </mat-card>
    </div>

    <!-- Content Grid -->
    <div class="content-grid">
      <!-- Upcoming Assignments -->
      <mat-card class="content-card">
        <mat-card-header>
          <mat-card-title>
            <mat-icon>assignment</mat-icon>
            Upcoming Assignments
          </mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <mat-list *ngIf="dashboardData.upcomingAssignments.length > 0">
            <mat-list-item *ngFor="let assignment of dashboardData.upcomingAssignments">
              <mat-icon matListItemIcon>assignment</mat-icon>
              <div matListItemTitle>{{assignment.title || assignment.courseName}}</div>
              <div matListItemLine>Due: {{assignment.dueDate | date:'short'}}</div>
            </mat-list-item>
          </mat-list>
          <p *ngIf="dashboardData.upcomingAssignments.length === 0" class="empty-message">
            No upcoming assignments
          </p>
        </mat-card-content>
      </mat-card>

      <!-- Recent Announcements -->
      <mat-card class="content-card">
        <mat-card-header>
          <mat-card-title>
            <mat-icon>announcement</mat-icon>
            Recent Announcements
          </mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <mat-list *ngIf="dashboardData.recentAnnouncements.length > 0">
            <mat-list-item *ngFor="let announcement of dashboardData.recentAnnouncements">
              <mat-icon matListItemIcon>announcement</mat-icon>
              <div matListItemTitle>{{announcement.title}}</div>
              <div matListItemLine>{{announcement.message}}</div>
            </mat-list-item>
          </mat-list>
          <p *ngIf="dashboardData.recentAnnouncements.length === 0" class="empty-message">
            No recent announcements
          </p>
        </mat-card-content>
      </mat-card>

      <!-- Today's Schedule -->
      <mat-card class="content-card full-width" *ngIf="dashboardData.todaySchedule.length > 0">
        <mat-card-header>
          <mat-card-title>
            <mat-icon>schedule</mat-icon>
            Today's Classes
          </mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <mat-list>
            <mat-list-item *ngFor="let class of dashboardData.todaySchedule">
              <mat-icon matListItemIcon>schedule</mat-icon>
              <div matListItemTitle>{{class.courseName}}</div>
              <div matListItemLine>{{class.time}} - {{class.room}}, {{class.building}}</div>
            </mat-list-item>
          </mat-list>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>
